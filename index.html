<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Registration</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center h-screen">

<div class="bg-gray-800 p-6 rounded-lg w-80 shadow-lg">
  <h2 class="text-2xl font-bold mb-4 text-center">Setup Your Profile</h2>

  <!-- Цель -->
  <label class="block mb-2 font-medium">Your Goal:</label>
  <select id="userGoal" class="w-full mb-4 p-2 rounded text-black">
    <option value="lose">Lose Weight</option>
    <option value="gain">Gain Muscle</option>
    <option value="maintain">Maintain</option>
  </select>

  <!-- Вес -->
  <label class="block mb-2 font-medium">Your Weight: <span id="weightValue">70</span> kg</label>
  <input type="range" min="0" max="200" value="70" id="userWeight" class="w-full mb-4">

  <button id="saveUser" class="w-full bg-blue-800 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-all duration-300 active:scale-95">
    Save
  </button>
</div>

<script>
  const weightSlider = document.getElementById("userWeight");
  const weightValue = document.getElementById("weightValue");

  // Динамически обновляем цифру при движении ползунка
  weightSlider.addEventListener("input", () => {
    weightValue.textContent = weightSlider.value;
  });

  // Пример отправки данных на сервер
  document.getElementById("saveUser").addEventListener("click", async () => {
    const goal = document.getElementById("userGoal").value;
    const weight = weightSlider.value;

    await fetch("/register", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams({
        user_id: telegramUserId, // получаем из Telegram WebApp SDK
        weight: weight,
        target: goal
      })
    });

    // Перенаправление на базовую страницу
    window.location.href = `/home?user_id=${telegramUserId}`;
  });
</script>

</body>
</html>
